# 项目阶段性任务安排
这里的阶段指每次集中向老师汇报的中间时间段,集中汇报的时间为每周的周三以及周日晚,一阶段时常为三至四天

## 第一阶段:(8.27-8.30)
1.建立gittee仓库

2.组员分工

3.下载老师提供的饿了么V1.0工程文件

4.组员在各自电脑上完成环境的安装,试运行饿了么V1.0的前后端项目

5.开始撰写软件需求规划说明书(SRS)初稿

6.整理出符合RESTful分割的前后端API接口信息 [约束文档](https://www.yuque.com/clearautumn/gse398/ecqwgdmq8ylnntda#F75L)

7.一次组会

## 第二阶段(8.31-9.4)
1. 完善[SRS](https://www.yuque.com/clearautumn/gse398/lpfvlxbg13ikf5ve)的内容(整理RESTful风格化后的API接口信息)
2. 建立github仓库 ,设置.git/config配置文件,同时推送到gittee与github仓库
3. 负责前端的成员继续学习关于前端编程的内容,了解vue2.0与vue3.0的区别,为后续<font style="color:#333333;">将项目前端技术从VUE2升级到VUE3作基础</font>
3. 对数据库结构进行优化并整理出数据库结构一览文档,便于API接口RESTful风格化以及后续的开发
4. 初步启动"饿了吧V2.0"项目
5. 实现对"饿了吧V1.0"中前后端API进行符合RESTful风格的修改
6. 使用latex对SRS等文档的内容进行规范化排版
7. 本阶段预期解决"饿了吧V2.0"项目中的如下问题:
        - [x] 1) <font style="color:#333333;">页面无法返回上一步。首页之后的页面缺少返回键，用户只能一路点到底才能退出。</font>
        - [x] <font style="color:#333333;">2) 前端订单页面的小数显示上存在 bug，可能会出现小数点后很多位数字，没有使用 toFixed() 函数进行更改限制</font>
        - [ ] <font style="color:#333333;">3) 后端代码订单业务逻辑缺少对订单和购物⻋是否为空的验证.</font>
        - [x] <font style="color:#333333;">4) 在对订单中涉及的商品名称、价格等信息进行修改时，会引起历史订单信息的修改，应在存储历史信息时进行拷贝存储。修改送货地址也有类似问题。</font>
        - [x] 5) <font style="color:#333333;">前端版本代码均存在商家列表/⻝品列表不能拉到底，最后⼀个信息会被底部菜单栏遮挡的问题</font>
        - [x] 6) <font style="color:#333333;">历史未支付订单应该有支付入口</font>
        - [x] <font style="color:#333333;">7) 手机号的验证不严谨,只有对是否为空的验证,没有对手机号的位数,开头数字,以及运行商信息进行验证.(后端二次)</font>
        - [x] <font style="color:#333333;">7)购物车不能展开，无法查看自己已经买的东西的单价和数量。</font>
        - [x] <font style="color:#333333;">8)后端向前端返回的对象为数据库中的该对象的全部信息，例如返回给前端的⽤户实体包含该⽤户密码，这是⼀个不安全的设计，直接将⼀些不该暴露的信息暴露给前端，存在巨⼤的信息安全隐患，应当把向前端返回的信息单独封装进⼀个类，只返回必要的信息。</font>
        - [x] 9）后端实现对用户数据的修改与删除流程，实现商家的注册、修改、删除流程，实现商品的添加、修改、删除流程。
        - [x] 10)初步添加"我的"以及"个人信息""页面

## 第三阶段
1. 本阶段预计实现饿了吧V1.0到饿了吧V2.0的全部功能
2. 本阶段实现VUE2到VUE3的升级
3. 检查项目本身存在的bug,并进行一一修复,包括:
    1. 注册用户时,输入手机号一栏失去焦点时抛出异常的bug(已修复)
    2. 用户注册时,错误格式的手机号在失去焦点并点击注册之后会弹窗两次提醒
4.  本阶段预期解决如下问题:
    - [x] 1)在后端添加对手机号的二次验证
        - [x] a. 注意对于验证失败的处理方式
    - [x] 2)前端添加"我的"页面对用户信息的拉取(包括头像和用户名等信息)
    - [ ] <font style="color:#333333;">3)用户隐私信息如：电话号码、登录密码等，通过接口对参数进行明文传输，这使得用户的隐私信息被直接暴露，造成极大的安全隐患。</font>
        - [x] a. 这里使用HTTP POST传输, 避免在 URL 中传输敏感数据  
    - [x] <font style="color:#333333;">4)⽤户注册时，存⼊的密码未经任何加密处理，这⾥应该将密码单向加密后再存⼊数据库。</font>
    - [x] <font style="color:#333333;">5)后端对前端提交的数据和身份并不检验，这就导致可能有伪造的前端提交恶意数据，可能修改他人送餐地址，或者修改订单金额等。</font>
    - [x] <font style="color:#333333;">6)商品不是无限的，应该有数量，订购时应加互斥锁(这里通过对问题的分析发现,生活中外卖软件实际上并未对商品的数量进行限制,而是商家手动设置商品是否告罄,于是此处问题我们转换为商品的订购要事先查询该商品是否告罄)</font>
        - [x] a.修改数据库结构,在food表中加入新字段soldOut
        - [x] b.对dao层的sql语句进行修改
    - [ ] <font style="color:#333333;">7)考虑到在实际应用场景中可能存在网络异常情况，例如用户进行订单支付时接口超时，重新调用接口会导致重复扣款，严重影响软件质量及用户评价。</font>

<font style="color:#333333;"></font>

# 组会记录
## 第一次组会(8.27)记录
1.对成员分工进行详细的安排

2.建立gittee仓库

3.组员分方向学习智慧树内容

4.组员各自配置开发环境

5.启动SRS的初稿撰写

## 第二次组会(9.1)记录
1.后端介绍RESTful风格化之后的后端代码结构以及后续接口设计规范

2.前端展示返回功能的效果,效果不佳,勒令整改

3.讨论TDD开发模式,指定初步的测试代码方案:对于后端代码进行测试











# <font style="color:#1a1a1a;">已知现有项目存在的问题</font>
## (1) <font style="color:#333333;">功能方面的问题</font>
● <font style="color:#333333;">功能不完整，只有用户下订单一个流程，缺少其他必要的基本功能。</font>

● ~~<font style="color:#333333;">有的页面无法返回上一步。首页之后的页面缺少返回键，用户只能一路点到底才能退出。</font>~~

● ~~<font style="color:#333333;">在对订单中涉及的商品名称、价格等信息进行修改时，会引起历史订单信息的修改，应在存储历史信息时进行拷贝存储。修改送货地址也有类似问题。</font>~~

● ~~<font style="color:#333333;">添加新的收货地址的问题。在新增收获地址时会出现显示的用户信息与新增的不同的情况。原因是前端在取数据时，取得的是登录用户的信息。用户也可以给其他人点餐，根据所选地址进行了显示信息的更改。</font>~~

●~~ ~~~~<font style="color:#333333;">前端订单页面的小数显示上存在 bug，可能会出现小数点后很多位数字，没有使用 toFix 函数进行更改限制。</font>~~

● ~~<font style="color:#333333;">购物车不能展开，无法查看自己已经买的东西的单价和数量。</font>~~

●~~ ~~~~<font style="color:#333333;">历史未支付订单应该有支付入口</font>~~

● <font style="color:#333333;">该项目的CSS很多是写死的，没有考虑页面适配，稍微比例有些问题会出bug。作为一个手机网页端应该尝试满足不同机型的比例适配。</font>

●~~ ~~~~<font style="color:#333333;">前端版本代码均存在商家列表/⻝品列表不能拉到底，最后⼀个信息会被底部菜单栏遮挡，可以理解为下⽅没有⼀块空⽩将列表顶上去⽽底部菜单栏⼜将其遮挡住。</font>~~

## (2) <font style="color:#333333;">设计和安全方面的问题</font>
●~~ ~~~~<font style="color:#333333;">前后端接口设计不规范，完全不符合RESTful风格。</font>~~

● <font style="color:#333333;">用户隐私信息如：电话号码、登录密码等，通过接口对参数进行明文传输，这使得用户的隐私信息被直接暴露，造成极大的安全隐患。</font>

● ~~<font style="color:#333333;">后端向前端返回的对象为数据库中的该对象的全部信息，例如返回给前端的⽤户实体包含该⽤户密码，这是⼀个不安全的设计，直接将⼀些不该暴露的信息暴露给前端，存在巨⼤的信息安全隐患，应当把向前端返回的信息单独封装进⼀个类，只返回必要的信息</font>~~<font style="color:#333333;">。</font>

● <font style="color:#333333;">⽤户注册时，存⼊的密码未经任何加密处理，这⾥应该将密码单向加密后再存⼊数据库。</font>

● <font style="color:#333333;">后端对前端提交的数据和身份并不检验，这就导致可能有伪造的前端提交恶意数据，可能修改他人送餐地址，或者修改订单金额等。</font>

● <font style="color:#333333;">商家端删除⻝品时，未曾对该⻝品是否属于该商家进⾏验证，导致可能会出现某商家删除其他商家⻝品的现象。</font>

● <font style="color:#333333;">商品不是无限的，应该有数量，订购时应加互斥锁</font>

● <font style="color:#333333;">考虑到在实际应用场景中可能存在网络异常情况，例如用户进行订单支付时接口超时，重新调用接口会导致重复扣款，严重影响软件质量及用户评价。</font>

● <font style="color:#333333;">后端代码订单业务逻辑缺少对订单和购物⻋是否为空的验证。</font>

● <font style="color:#333333;">项⽬四的后端跨域处理⽅案只能允许本地进⾏访问，完全⽆法部署上线。</font>

● <font style="color:#333333;">没有部署，仍然是在开发环境中演示。</font>

